---
title: "R Notebook"
output: html_notebook
---

```{r message=FALSE, warning=FALSE}
library(readr)
library(tidyverse)

genes_url       <- 'https://raw.githubusercontent.com/DeepenData/clases/master/04-filters-programacion-funcional-apply-map/recon3_genes_to_reactionIDs.csv'
metabolites_url <- 'https://raw.githubusercontent.com/DeepenData/clases/master/04-filters-programacion-funcional-apply-map/recon3_metabolite_metadata.csv'
reactions_url   <- 'https://raw.githubusercontent.com/DeepenData/clases/master/04-filters-programacion-funcional-apply-map/recon3_reactions_metadata.csv'

import_my_csv <- function(url){readr::read_csv(url) %>% dplyr::select(-matches("x1")) %>% return}

genes_url       %>% import_my_csv -> genes
metabolites_url %>% import_my_csv -> metabolites
reactions_url   %>% import_my_csv -> reactions
```

```{r message=FALSE, warning=FALSE}
library(magrittr)

list(genes_url,reactions_url, metabolites_url) -> my_list
lapply(my_list, import_my_csv)                -> recon3_list.lapply
sapply(my_list, import_my_csv)                -> recon3_list.sapply
purrr::map(my_list, import_my_csv)            -> recon3_list.map

list(recon3_list.lapply,recon3_list.sapply,recon3_list.map) %>% map(length)

my_names <- c('genes', 'reactions', 'metabolites')


recon3_list.map %<>% purrr::set_names(my_names)


rename_ids <- function(df){df %>% as_tibble %>% rename_with(tolower) %>%  rename_with(~str_replace(., '.*id.*','ID'))}

rename_ids <- function(df){df %>% as_tibble %>% rename_with(~str_replace(.,regex('.*iD.*', ignore_case = T) ,'ID'))}

recon3_list.map$genes %>% rename_ids


map(recon3_list.map,rename_ids ) ->recon3_list

#data.table::setnames(my_names)

```
Filter
```{r}

```

