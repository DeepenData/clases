<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 CLASE 3 - Exploraci√≥n y transformaci√≥n de estructuras de datos en R | Principios de bioinform√°tica y ciencias de biodatos</title>
  <meta name="description" content="Clases de bioinform√°tica para gente no inform√°tica." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 CLASE 3 - Exploraci√≥n y transformaci√≥n de estructuras de datos en R | Principios de bioinform√°tica y ciencias de biodatos" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Clases de bioinform√°tica para gente no inform√°tica." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 CLASE 3 - Exploraci√≥n y transformaci√≥n de estructuras de datos en R | Principios de bioinform√°tica y ciencias de biodatos" />
  
  <meta name="twitter:description" content="Clases de bioinform√°tica para gente no inform√°tica." />
  

<meta name="author" content="Alejandro Acevedo-Aracena, PhD; Manuel Mu√±oz-Gonz√°lez" />


<meta name="date" content="2021-04-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"/>
<link rel="next" href="clase-4-descargas-desde-repositorios-e-interacci√≥n-con-objetos-descargados.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li> <img src="https://pseudo-dropbox.s3-us-west-2.amazonaws.com/Manu/calamar_3.png" alt="Calamar" width="300">  </li>
<li><a href="https://github.com/DeepenData/clases">üìÑ ./source</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentaci√≥n</a></li>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html"><i class="fa fa-check"></i>Setup del ambiente</a>
<ul>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#paquetes-de-cran"><i class="fa fa-check"></i>Paquetes de CRAN</a></li>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#paquetes-de-bioconductor"><i class="fa fa-check"></i>Paquetes de Bioconductor</a></li>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#instalaci√≥n-de-rstudio-en-windows"><i class="fa fa-check"></i>Instalaci√≥n de R(Studio) en Windows</a>
<ul>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#usando-un-gestor-de-paquetes"><i class="fa fa-check"></i>Usando un gestor de paquetes</a></li>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#instalaci√≥n-manual"><i class="fa fa-check"></i>Instalaci√≥n manual</a></li>
<li class="chapter" data-level="" data-path="setup-del-ambiente.html"><a href="setup-del-ambiente.html#instalando-r-tools-manualmente"><i class="fa fa-check"></i>Instalando R-tools manualmente</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I PRIMERA SECCI√ìN - Herramientas computacionales y programaci√≥n para bioinform√°tica</b></span></li>
<li class="chapter" data-level="1" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><i class="fa fa-check"></i><b>1</b> CLASE 1 - Conceptos generales, ejemplos de casos y nociones de lenguajes de programaci√≥n</a>
<ul>
<li class="chapter" data-level="1.1" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#interacci√≥n-con-terminales"><i class="fa fa-check"></i><b>1.1</b> Interacci√≥n¬†con¬†terminales</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#navegaci√≥n-del-sistema"><i class="fa fa-check"></i><b>1.1.1</b> Navegaci√≥n del sistema</a></li>
<li class="chapter" data-level="1.1.2" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#descargando-archivos"><i class="fa fa-check"></i><b>1.1.2</b> Descargando archivos</a></li>
<li class="chapter" data-level="1.1.3" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#descomprimiendo-archivos"><i class="fa fa-check"></i><b>1.1.3</b> Descomprimiendo archivos</a></li>
<li class="chapter" data-level="1.1.4" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#explorando-y-renombrando-archivos"><i class="fa fa-check"></i><b>1.1.4</b> Explorando y renombrando archivos</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#lenguajes-de-programaci√≥n-e-ides"><i class="fa fa-check"></i><b>1.2</b> Lenguajes¬†de¬†programaci√≥n e IDEs</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#tipos-de-lenguajes-de-programacion"><i class="fa fa-check"></i><b>1.2.1</b> Tipos de lenguajes de programacion</a></li>
<li class="chapter" data-level="1.2.2" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#integrated-development-environment"><i class="fa fa-check"></i><b>1.2.2</b> Integrated Development Environment</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#introducci√≥n-a-r-y-cuadernos"><i class="fa fa-check"></i><b>1.3</b> Introducci√≥n a R y cuadernos</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#formato-de-r-notebooks"><i class="fa fa-check"></i><b>1.3.1</b> Formato de R notebooks</a></li>
<li class="chapter" data-level="1.3.2" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#trabajando-con-chunks"><i class="fa fa-check"></i><b>1.3.2</b> Trabajando con chunks</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html"><a href="clase-1-conceptos-generales-ejemplos-de-casos-y-nociones-de-lenguajes-de-programaci√≥n.html#importaci√≥n-y-analisis-de-datos"><i class="fa fa-check"></i><b>1.4</b> Importaci√≥n y analisis de datos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><i class="fa fa-check"></i><b>2</b> CLASE 2 - Creaci√≥n y exploraci√≥n de estructuras de datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#creaci√≥n-de-dataframes"><i class="fa fa-check"></i><b>2.1</b> Creaci√≥n de dataframes</a></li>
<li class="chapter" data-level="2.2" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#descargando-data-desde-internet"><i class="fa fa-check"></i><b>2.2</b> Descargando data desde internet</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#descarga-desde-p√°gina-web"><i class="fa fa-check"></i><b>2.2.1</b> Descarga desde p√°gina web</a></li>
<li class="chapter" data-level="2.2.2" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#descarga-desde-github"><i class="fa fa-check"></i><b>2.2.2</b> Descarga desde GitHub</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#leyendo-archivos-extra√±os"><i class="fa fa-check"></i><b>2.3</b> Leyendo archivos extra√±os</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#escritura-de-archivos-con-delimitadores-csv-tsv-txt-etc."><i class="fa fa-check"></i><b>2.3.1</b> Escritura de archivos con delimitadores (csv, tsv, txt, etc.)</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#directorios-en-r"><i class="fa fa-check"></i><b>2.4</b> Directorios en R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#generaci√≥n-de-listas-de-archivos-de-los-directorios"><i class="fa fa-check"></i><b>2.4.1</b> Generaci√≥n de listas de archivos de los directorios</a></li>
<li class="chapter" data-level="2.4.2" data-path="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html"><a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html#creaci√≥n-de-directorios-y-de-archivos-dentro-de-r"><i class="fa fa-check"></i><b>2.4.2</b> Creaci√≥n de directorios y de archivos dentro de R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><i class="fa fa-check"></i><b>3</b> CLASE 3 - Exploraci√≥n y transformaci√≥n de estructuras de datos en R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#utilizando-mutate-para-manipulaci√≥n-de-datos"><i class="fa fa-check"></i><b>3.1</b> Utilizando mutate para manipulaci√≥n de datos</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#accediendo-a-datos-tabulados"><i class="fa fa-check"></i><b>3.1.1</b> Accediendo a datos tabulados</a></li>
<li class="chapter" data-level="3.1.2" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#funciones-personalizadas"><i class="fa fa-check"></i><b>3.1.2</b> Funciones personalizadas</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#pipes-complicadas"><i class="fa fa-check"></i><b>3.2</b> Pipes complicadas</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#tipos-de-pipes"><i class="fa fa-check"></i><b>3.2.1</b> Tipos de Pipes</a></li>
<li class="chapter" data-level="3.2.2" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#usando-sistemas-de-identificadores"><i class="fa fa-check"></i><b>3.2.2</b> Usando sistemas de identificadores</a></li>
<li class="chapter" data-level="3.2.3" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#filtrado-de-filas"><i class="fa fa-check"></i><b>3.2.3</b> Filtrado de filas</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#expresiones-regulares"><i class="fa fa-check"></i><b>3.3</b> Expresiones regulares</a></li>
<li class="chapter" data-level="3.4" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#workflow-de-la-vida-real"><i class="fa fa-check"></i><b>3.4</b> Workflow de la vida real</a></li>
<li class="chapter" data-level="3.5" data-path="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#ejemplo-de-vida-real"><i class="fa fa-check"></i><b>3.5</b> Ejemplo de vida real</a></li>
</ul></li>
<li class="part"><span><b>II SEGUNDA SECCI√ìN - Obtenci√≥n y pre-procesamiento de datos biol√≥gicos y metadatos asociados</b></span></li>
<li class="chapter" data-level="4" data-path="clase-4-descargas-desde-repositorios-e-interacci√≥n-con-objetos-descargados.html"><a href="clase-4-descargas-desde-repositorios-e-interacci√≥n-con-objetos-descargados.html"><i class="fa fa-check"></i><b>4</b> CLASE 4 - Descargas desde repositorios e interacci√≥n con objetos descargados</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Principios de bioinform√°tica y ciencias de biodatos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clase-3---exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r" class="section level1" number="3">
<h1><span class="header-section-number">3</span> CLASE 3 - Exploraci√≥n y transformaci√≥n de estructuras de datos en R</h1>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>) <span class="co"># Muchas cosas cool</span></span>
<span id="cb42-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Incluidas en tidyverse, en caso de errores cargandolo</span></span>
<span id="cb42-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="co"># Manipulaci√≥n de datos mediante gramatica propia</span></span>
<span id="cb42-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;magrittr&quot;</span>) <span class="co"># Operadores ca√±eria (pipes) %&gt;%)</span></span>
<span id="cb42-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readr&quot;</span>) <span class="co"># Traducci√≥n (pharsing) de archivos a una tibble</span></span>
<span id="cb42-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;stringr&quot;</span>) <span class="co"># Operadores consistentes para strings</span></span></code></pre></div>
<p>La funci√≥n <em>mutate()</em> de <strong>dplyr</strong> permite crear nuevas variables manteniendo las ya existentes.
Por ejemplo, sacando el promedio de dos variables u operaciones similares.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importando datos de un CSV</span></span>
<span id="cb43-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb43-2" aria-hidden="true" tabindex="-1"></a>data.location <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/DeepenData/clases/2bd7d93d9f23b2fe3fc679ca44e40a286f292ffe/06_mutate_pipes_regex/data_oct_08_2020.csv&quot;</span></span>
<span id="cb43-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb43-3" aria-hidden="true" tabindex="-1"></a>sim.without.outliers <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(data.location) <span class="co"># Importa la data a &quot;sim.without.outliers&quot;</span></span></code></pre></div>
<div id="utilizando-mutate-para-manipulaci√≥n-de-datos" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Utilizando mutate para manipulaci√≥n de datos</h2>
<div id="accediendo-a-datos-tabulados" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Accediendo a datos tabulados</h3>
<p>La gramatica de R utiliza <code>[]</code> y <code>$</code> para acceder a objetos dentro de una estructura de datos.
Con un dataframe como el sacado de un CSV, esto son las filas, columnas, celdas individuales, etc.
Dado que un dataframe puede contener dataframes, este modo de acceso puede ir varios niveles de profundidad
<!-- Como conspiraciones dentro de conspiraciones dentro de conspiraciones en _The X-Files_-->.</p>
<ul>
<li><code>sim.without.outliers$1</code> saca la primera como vector</li>
<li><code>sim.without.outliers[1]</code> saca la columna 1</li>
<li><code>sim.without.outliers[ ,c(1,6)]</code> saca las columnas 1 y 6</li>
<li><code>sim.without.outliers[ ,c(1:6)]</code> saca las columnas de 1 a 6</li>
<li><code>sim.without.outliers[ ,-c(1,6)]</code> saca todas las columnas <strong>menos</strong> la 1 y 6</li>
<li><code>sim.without.outliers[c(10:110) ,c(2:6)]</code> saca las filas 10 a 110 (100 en total) de las columnas 2 a 6</li>
<li><code>sim.without.outliers[[1]]</code> Sacamos la columna 1 como vector</li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accediendo a data en un objeto</span></span>
<span id="cb44-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb44-2" aria-hidden="true" tabindex="-1"></a>sim.without.outliers[<span class="fu">c</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">200</span>), <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)] <span class="sc">%&gt;%</span> <span class="fu">rowMeans</span>()</span>
<span id="cb44-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb44-3" aria-hidden="true" tabindex="-1"></a>sim.without.outliers[<span class="st">&quot;treatment_1&quot;</span>] <span class="sc">/</span> sim.without.outliers[<span class="st">&quot;treatment_2&quot;</span>] <span class="sc">%&gt;%</span> <span class="fu">log2</span>() <span class="ot">-&gt;</span> hola</span>
<span id="cb44-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb44-4" aria-hidden="true" tabindex="-1"></a>sim.without.outliers<span class="sc">$</span>nueva_columna <span class="ot">&lt;-</span> hola <span class="co"># Llena la columna con &quot;hola&quot;</span></span>
<span id="cb44-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb44-5" aria-hidden="true" tabindex="-1"></a>sim.without.outliers<span class="sc">$</span>nueva_columna <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Elimina una columna</span></span></code></pre></div>
<p>Para trabajar con columnas en un dataframe, usamos <strong>dplyr::mutate()</strong>.
Esto crea una nueva columna a partir de existentes, preservando las originales.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificando la tabla con mutate() para calcular el Fold-change (log2/log2)</span></span>
<span id="cb45-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-2" aria-hidden="true" tabindex="-1"></a>sim.without.outliers <span class="sc">%&gt;%</span> <span class="co"># Tirando data por la ca√±eria</span></span>
<span id="cb45-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Hace un promedio de las columnas TREAT(MENT)</span></span>
<span id="cb45-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Mean treatment</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;treat&quot;</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Hace un promedio de las columnas CONTROL</span></span>
<span id="cb45-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Mean control</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;control&quot;</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb45-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calcula el fold-change de TRATAMIENTO sobre CONTROL</span></span>
<span id="cb45-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">log2Ratio</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">log2</span>(.[[<span class="st">&quot;Mean treatment&quot;</span>]] <span class="sc">/</span> .[[<span class="st">&quot;Mean control&quot;</span>]])) <span class="ot">-&gt;</span> mutated.sim</span></code></pre></div>
</div>
<div id="funciones-personalizadas" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Funciones personalizadas</h3>
<p>Creamos funciones para evitar escribir miles de lineas de codigo cada vez que queremos repetir algo.
Podemos agruparlas y hacer una libreria para proyectos grandes, donde reutilizamos las funciones, o para recursiones.</p>
<p>Es importante considerar que las funciones son para cosas con un comportamiento predecible, e idealmente estable.
Para analisis de datos, usualmente tenemos que limpiar los datasets,
para tener una estructura ‚Äúest√°ndar‚Äù que nuestras funciones acepten,
e idealmente definir un comportamiento de error para las funciones.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos funciones personalizadas para reutilizar codigo</span></span>
<span id="cb46-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aumenta por el cambio +- fracci√≥n del cambio. Es decir 3 +- 0.3 (2.7-3.3)</span></span>
<span id="cb46-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-3" aria-hidden="true" tabindex="-1"></a>an.increase <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">change =</span> <span class="dv">3</span>, <span class="at">fraction =</span> .<span class="dv">1</span>) {</span>
<span id="cb46-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> (change <span class="sc">*</span> x <span class="sc">-</span> fraction <span class="sc">*</span> (change <span class="sc">*</span> x)), <span class="at">max =</span> (change <span class="sc">*</span> x <span class="sc">+</span> fraction <span class="sc">*</span> (change <span class="sc">*</span> x)))</span>
<span id="cb46-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Disminuye por el cambio +- fracci√≥n del cambio. Es decir 0.2 +- 0.1 (0.1-0.3)</span></span>
<span id="cb46-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-7" aria-hidden="true" tabindex="-1"></a>a.decrease <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">change =</span> .<span class="dv">2</span>, <span class="at">fraction =</span> .<span class="dv">1</span>) {</span>
<span id="cb46-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> (change <span class="sc">*</span> x <span class="sc">-</span> fraction <span class="sc">*</span> (change <span class="sc">*</span> x)), <span class="at">max =</span> (change <span class="sc">*</span> x <span class="sc">+</span> fraction <span class="sc">*</span> (change <span class="sc">*</span> x)))</span>
<span id="cb46-9"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb46-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Podemos crear una funci√≥n para el pipeline m√°s complejo que hicimos para el calculo del fold-change.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a>generate_mean_log2Ratio <span class="ot">&lt;-</span> <span class="cf">function</span>(x, a.letter) {</span>
<span id="cb47-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Mean treatment</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;treat&quot;</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Mean control</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">starts_with</span>(<span class="st">&quot;control&quot;</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">log2Ratio =</span> <span class="fu">log2</span>(.[[<span class="st">&quot;Mean treatment&quot;</span>]] <span class="sc">/</span> .[[<span class="st">&quot;Mean control&quot;</span>]])) <span class="sc">%&gt;%</span></span>
<span id="cb47-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Les a√±adiremos un identidicador al final, por &quot;&quot;&quot;motivos&quot;&quot;&quot; (ver luego)</span></span>
<span id="cb47-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_at</span>(<span class="fu">vars</span>(<span class="fu">matches</span>(<span class="st">&quot;^treat|^contr|^mean|log2&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)), <span class="fu">funs</span>(<span class="fu">paste0</span>(., a.letter)))</span>
<span id="cb47-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb47-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generando sets para correlaciones</span></span>
<span id="cb48-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-2" aria-hidden="true" tabindex="-1"></a>sim.without.outliers <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_mean_log2Ratio</span>(<span class="st">&quot; A&quot;</span>) <span class="ot">-&gt;</span> A <span class="co"># Calcula el fold-change inicial sin cambios</span></span>
<span id="cb48-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-4" aria-hidden="true" tabindex="-1"></a>sim.without.outliers <span class="sc">%&gt;%</span></span>
<span id="cb48-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;treatment&quot;</span>), an.increase)) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_mean_log2Ratio</span>(<span class="st">&quot; B&quot;</span>) <span class="ot">-&gt;</span> B <span class="co"># Fold-change aumenta 1.4-1.7 veces</span></span>
<span id="cb48-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-7" aria-hidden="true" tabindex="-1"></a>sim.without.outliers <span class="sc">%&gt;%</span></span>
<span id="cb48-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;treatment&quot;</span>), a.decrease)) <span class="sc">%&gt;%</span></span>
<span id="cb48-9"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_mean_log2Ratio</span>(<span class="st">&quot; C&quot;</span>) <span class="ot">-&gt;</span> C <span class="co"># Fold-change disminuye -3.3 - -1.7 veces</span></span>
<span id="cb48-10"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Creando el dataset final</span></span>
<span id="cb48-11"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(</span>
<span id="cb48-12"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-12" aria-hidden="true" tabindex="-1"></a>  A, <span class="co"># Parte con la data A</span></span>
<span id="cb48-13"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(B, <span class="fu">matches</span>(<span class="st">&quot;tre|con|log&quot;</span>)), <span class="co"># A√±ade columnas de B</span></span>
<span id="cb48-14"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(C, <span class="fu">matches</span>(<span class="st">&quot;tre|con|log&quot;</span>))</span>
<span id="cb48-15"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb48-15" aria-hidden="true" tabindex="-1"></a>) <span class="ot">-&gt;</span> final.data <span class="co"># A√±ade columnas de C y guarda</span></span></code></pre></div>
<pre><code>##   name ID treatment_1 A treatment_2 A treatment_3 A control_1 A control_2 A
## 1 bg_1  1      98769372      55528721     216372415    70057879   314970404
## 2 bg_2  2      21576971      15703117      49743142  3431646477   735515564
## 3 bg_3  3     574350430    1537885240    8727327947   254444555    11764283
## 4 bg_4  4      20926171      47644294      88937903   599913422    43731828
## 5 bg_5  5     164374922     728256656      68959572   495906095  1510632311
##   control_3 A Mean treatment A Mean control A log2Ratio A treatment_1 B
## 1  4478205827        123556836     1621078037   -3.713707     322326623
## 2    24453279         29007743     1397205107   -5.589962     322326623
## 3    53031820       3613187872      106413553    5.085518     322326623
## 4   297274234         52502790      313639828   -2.578643     322326623
## 5   417270587        320530383      807936331   -1.333780     322326623
##   treatment_2 B treatment_3 B control_1 B control_2 B control_3 B
## 1     151905053     649170201    70057879   314970404  4478205827
## 2     151905053     649170201  3431646477   735515564    24453279
## 3     151905053     649170201   254444555    11764283    53031820
## 4     151905053     649170201   599913422    43731828   297274234
## 5     151905053     649170201   495906095  1510632311   417270587
##   Mean treatment B Mean control B log2Ratio B treatment_1 C treatment_2 C
## 1        374467292     1621078037  -2.1140419      19765556      11931499
## 2        374467292     1397205107  -1.8996322      19765556      11931499
## 3        374467292      106413553   1.8151578      19765556      11931499
## 4        374467292      313639828   0.2557309      19765556      11931499
## 5        374467292      807936331  -1.1094019      19765556      11931499
##   treatment_3 C control_1 C control_2 C control_3 C Mean treatment C
## 1      44547260    70057879   314970404  4478205827         25414771
## 2      44547260  3431646477   735515564    24453279         25414771
## 3      44547260   254444555    11764283    53031820         25414771
## 4      44547260   599913422    43731828   297274234         25414771
## 5      44547260   495906095  1510632311   417270587         25414771
##   Mean control C log2Ratio C
## 1     1621078037   -5.995142
## 2     1397205107   -5.780733
## 3      106413553   -2.065943
## 4      313639828   -3.625370
## 5      807936331   -4.990502</code></pre>
</div>
</div>
<div id="pipes-complicadas" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Pipes complicadas</h2>
<div id="tipos-de-pipes" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Tipos de Pipes</h3>
<p>Las funciones de pipes vienen mejor definidas en <strong>magrittr</strong>.<br />
R no incluye pipes en base.</p>
<ul>
<li><code>%&gt;%</code> la pipe tradicional que conocemos y amamos; pasa un obejeto a la entrada de la funci√≥n<br />
</li>
<li><code>%$%</code> permite pasar adicionalmente los nombres del objeto<br />
</li>
<li><code>%&lt;&gt;%</code> pipe bidireccional, que sirve para modificar el objeto de la entrada<br />
</li>
<li><code>%T%</code> una tee, que permite sacar muestras del pipeline, o derivar a otros pipes</li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb50-1" aria-hidden="true" tabindex="-1"></a>final.data <span class="sc">%$%</span> name <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="co"># Sin head el output es de 3300 cosas</span></span></code></pre></div>
<pre><code>## [1] &quot;bg_1&quot; &quot;bg_2&quot; &quot;bg_3&quot; &quot;bg_4&quot; &quot;bg_5&quot; &quot;bg_6&quot;</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb52-1" aria-hidden="true" tabindex="-1"></a>final.data <span class="sc">%$%</span> <span class="fu">cor</span>(<span class="st">`</span><span class="at">log2Ratio A</span><span class="st">`</span>, <span class="st">`</span><span class="at">log2Ratio B</span><span class="st">`</span>) <span class="co"># Correlaci√≥n entre A y B</span></span></code></pre></div>
<pre><code>## [1] 0.7043315</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a>final.data <span class="sc">%$%</span> <span class="fu">cbind</span>(<span class="st">`</span><span class="at">log2Ratio A</span><span class="st">`</span>, <span class="st">`</span><span class="at">log2Ratio B</span><span class="st">`</span>, <span class="st">`</span><span class="at">log2Ratio C</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">colSums</span>() <span class="ot">-&gt;</span> my.col.sum</span>
<span id="cb54-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a>my.col.sum <span class="sc">%&gt;%</span> <span class="fu">subset</span>(. <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="ot">-&gt;</span> my.col.sum</span>
<span id="cb54-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a>my.col.sum <span class="sc">%&lt;&gt;%</span> <span class="fu">subset</span>(. <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="co"># Pipe bidireccional util para actualizar cosas</span></span>
<span id="cb54-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb54-4" aria-hidden="true" tabindex="-1"></a>final.data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;log2&quot;</span>)) <span class="sc">%T&gt;%</span> <span class="fu">plot</span>() <span class="sc">%&gt;%</span> <span class="co"># %T% permite sacar &quot;muestras&quot; del pipe</span></span>
<span id="cb54-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;B|C&quot;</span>)) <span class="ot">-&gt;</span> my.cols</span></code></pre></div>
<p><img src="clases_files/figure-html/unnamed-chunk-25-1.png" width="288" /></p>
</div>
<div id="usando-sistemas-de-identificadores" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Usando sistemas de identificadores</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto crea las descripciones del sistema o como estan descritas</span></span>
<span id="cb55-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Molestias de los datos √≥micos</span></span>
<span id="cb55-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-3" aria-hidden="true" tabindex="-1"></a>my.terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;system 1&quot;</span>, <span class="st">&quot;system 2.7.9&quot;</span>, <span class="st">&quot;subsystem A&quot;</span>, <span class="st">&quot;subsystem B and A&quot;</span>) <span class="co"># Sistemas super-sistemicos</span></span>
<span id="cb55-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(my.terms, <span class="fu">nrow</span>(final.data) <span class="sc">/</span> <span class="dv">2</span>, <span class="at">replace =</span> T) <span class="ot">-&gt;</span> terms.col <span class="co"># Genera una columna de terminos de 1650 lineas .</span></span>
<span id="cb55-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(final.data<span class="sc">$</span>name, <span class="fu">nrow</span>(final.data) <span class="sc">/</span> <span class="dv">2</span>, <span class="at">replace =</span> F) <span class="ot">-&gt;</span> names.sample <span class="co"># saca 1650 nombres sin duplicados, para una tabla donde habran termiminos para sistemas de identificadores</span></span>
<span id="cb55-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(terms.col, names.sample) <span class="ot">-&gt;</span> my.info <span class="co"># hacemos una tabla con datos de multiples funciones</span></span>
<span id="cb55-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(final.data, my.info, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="st">&quot;names.sample&quot;</span>)) <span class="ot">-&gt;</span> final.data.with.terms <span class="co"># elimina los datos que no tienen los terminos de sistemas que usamos</span></span>
<span id="cb55-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(final.data, my.info, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="st">&quot;names.sample&quot;</span>)) <span class="ot">-&gt;</span> final.data.with.terms.nas <span class="co"># terminos en que algunos tienen descriptores y otros no</span></span></code></pre></div>
</div>
<div id="filtrado-de-filas" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Filtrado de filas</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb56-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span> <span class="co"># Nuestra data media sucia sin los nombres sistemicos</span></span>
<span id="cb56-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">log2Ratio A</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">log2Ratio B</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">log2Ratio C</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># </span><span class="al">TODO</span><span class="co">: porque no funciona con &quot;?</span></span>
<span id="cb56-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="co"># Elimina todas las filas con NA</span></span>
<span id="cb56-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># CHUNK SIN OUTPUT</span></span></code></pre></div>
</div>
</div>
<div id="expresiones-regulares" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Expresiones regulares</h2>
<p>Las expresiones regulares, <em>regex</em>, son (generalizadamente) patrones de texto que definen un criterio de busqeda en un string.
Por ejemplo, <code>a...</code> se referiria a cualquier string que sea ‚Äúa‚Äù seguido por tres caracteres, como ‚Äúaaaa,‚Äù ‚Äúa123,‚Äù ‚Äúa,‚Äù etc.
Diversos lenguajes usan distintas gramaticas de <em>regex</em>, pero en general usan los mismos comodines y expresiones base.
R incluye paquetes base que usan <em>regex</em>, pero <strong>stringr</strong> tiene funciones m√°s detalladas.
Sitios como <a href="regex101.com/">regex101</a> permiten testear y analizar expresiones regulares.</p>
<!-- Tabla regex -->
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Detectando un patron</span></span>
<span id="cb57-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="st">&quot;DE&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># Detecta si hay o no, tira un vectro booleano</span></span>
<span id="cb57-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">which</span>() <span class="co"># Tira una lista de las columnas donde es str_detect es TRUE</span></span>
<span id="cb57-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: que hacia any()?</span></span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb58-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="st">&quot;DE&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">any</span>()</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;DE.</span><span class="sc">\\</span><span class="st">d+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">is.na</span>(.)]</span>
<span id="cb60-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co"># CHUNK SIN OUTPUT</span></span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Detecci√≥n de patrones algo m√°s avanzada</span></span>
<span id="cb61-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb61-2" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[aA-zZ]E.1</span><span class="sc">\\</span><span class="st">d$&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">is.na</span>(.)]</span></code></pre></div>
<pre><code>##  [1] &quot;DE_10&quot; &quot;DE_11&quot; &quot;DE_12&quot; &quot;DE_13&quot; &quot;DE_14&quot; &quot;DE_15&quot; &quot;DE_16&quot; &quot;DE_17&quot; &quot;DE_18&quot;
## [10] &quot;DE_19&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[aA-zZ]E.1</span><span class="sc">\\</span><span class="st">d+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">is.na</span>(.)]</span></code></pre></div>
<pre><code>##   [1] &quot;DE_10&quot;  &quot;DE_11&quot;  &quot;DE_12&quot;  &quot;DE_13&quot;  &quot;DE_14&quot;  &quot;DE_15&quot;  &quot;DE_16&quot;  &quot;DE_17&quot; 
##   [9] &quot;DE_18&quot;  &quot;DE_19&quot;  &quot;DE_100&quot; &quot;DE_101&quot; &quot;DE_102&quot; &quot;DE_103&quot; &quot;DE_104&quot; &quot;DE_105&quot;
##  [17] &quot;DE_106&quot; &quot;DE_107&quot; &quot;DE_108&quot; &quot;DE_109&quot; &quot;DE_110&quot; &quot;DE_111&quot; &quot;DE_112&quot; &quot;DE_113&quot;
##  [25] &quot;DE_114&quot; &quot;DE_115&quot; &quot;DE_116&quot; &quot;DE_117&quot; &quot;DE_118&quot; &quot;DE_119&quot; &quot;DE_120&quot; &quot;DE_121&quot;
##  [33] &quot;DE_122&quot; &quot;DE_123&quot; &quot;DE_124&quot; &quot;DE_125&quot; &quot;DE_126&quot; &quot;DE_127&quot; &quot;DE_128&quot; &quot;DE_129&quot;
##  [41] &quot;DE_130&quot; &quot;DE_131&quot; &quot;DE_132&quot; &quot;DE_133&quot; &quot;DE_134&quot; &quot;DE_135&quot; &quot;DE_136&quot; &quot;DE_137&quot;
##  [49] &quot;DE_138&quot; &quot;DE_139&quot; &quot;DE_140&quot; &quot;DE_141&quot; &quot;DE_142&quot; &quot;DE_143&quot; &quot;DE_144&quot; &quot;DE_145&quot;
##  [57] &quot;DE_146&quot; &quot;DE_147&quot; &quot;DE_148&quot; &quot;DE_149&quot; &quot;DE_150&quot; &quot;DE_151&quot; &quot;DE_152&quot; &quot;DE_153&quot;
##  [65] &quot;DE_154&quot; &quot;DE_155&quot; &quot;DE_156&quot; &quot;DE_157&quot; &quot;DE_158&quot; &quot;DE_159&quot; &quot;DE_160&quot; &quot;DE_161&quot;
##  [73] &quot;DE_162&quot; &quot;DE_163&quot; &quot;DE_164&quot; &quot;DE_165&quot; &quot;DE_166&quot; &quot;DE_167&quot; &quot;DE_168&quot; &quot;DE_169&quot;
##  [81] &quot;DE_170&quot; &quot;DE_171&quot; &quot;DE_172&quot; &quot;DE_173&quot; &quot;DE_174&quot; &quot;DE_175&quot; &quot;DE_176&quot; &quot;DE_177&quot;
##  [89] &quot;DE_178&quot; &quot;DE_179&quot; &quot;DE_180&quot; &quot;DE_181&quot; &quot;DE_182&quot; &quot;DE_183&quot; &quot;DE_184&quot; &quot;DE_185&quot;
##  [97] &quot;DE_186&quot; &quot;DE_187&quot; &quot;DE_188&quot; &quot;DE_189&quot; &quot;DE_190&quot; &quot;DE_191&quot; &quot;DE_192&quot; &quot;DE_193&quot;
## [105] &quot;DE_194&quot; &quot;DE_195&quot; &quot;DE_196&quot; &quot;DE_197&quot; &quot;DE_198&quot; &quot;DE_199&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;name&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[aA-zZ]E.1</span><span class="sc">\\</span><span class="st">d.+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  .[<span class="sc">!</span><span class="fu">is.na</span>(.)]</span>
<span id="cb65-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># CHUNK SIN OUTPUT</span></span></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;terms.col&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;^s.*m&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.exclude</span>() <span class="sc">%&gt;%</span> <span class="co"># Es como lo de arriba, pero tira m√°s cosas. Puede ser incomodo</span></span>
<span id="cb66-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb66-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># CHUNK SIN OUTPUT</span></span></code></pre></div>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reemplazo de patrones (subsystem -&gt; comparment) # </span><span class="al">TODO</span><span class="co">: compartment?</span></span>
<span id="cb67-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-2" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  .[[<span class="st">&quot;terms.col&quot;</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">&quot;subsyst.*&quot;</span>, <span class="st">&quot;comparment&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb67-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.exclude</span>() <span class="sc">%&gt;%</span></span>
<span id="cb67-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;comparment&quot;   &quot;system 2.7.9&quot; &quot;comparment&quot;   &quot;system 1&quot;     &quot;system 1&quot;    
##  [6] &quot;system 1&quot;     &quot;comparment&quot;   &quot;comparment&quot;   &quot;comparment&quot;   &quot;comparment&quot;</code></pre>
</div>
<div id="workflow-de-la-vida-real" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Workflow de la vida real</h2>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(</span>
<span id="cb69-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-3" aria-hidden="true" tabindex="-1"></a>    name, <span class="co"># en la columna &quot;name&quot;</span></span>
<span id="cb69-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">&quot;de.*&quot;</span>, <span class="co"># Busca &quot;de*&quot;</span></span>
<span id="cb69-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">ignore_case =</span> T</span>
<span id="cb69-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">&amp;</span> <span class="co"># sin diferencias Minuscula/Mayuscula</span></span>
<span id="cb69-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(</span>
<span id="cb69-9"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-9" aria-hidden="true" tabindex="-1"></a>      terms.col, <span class="co"># Busca en la columna &quot;term.cols&quot;</span></span>
<span id="cb69-10"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">regex</span>(<span class="st">&quot;B.*A&quot;</span>, <span class="at">ignore_case =</span> F)</span>
<span id="cb69-11"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-11" aria-hidden="true" tabindex="-1"></a>    )) <span class="co"># ...terminos que empiezan con B y terminan en A</span></span>
<span id="cb69-12"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co"># CHUNK SIN OUTPUT</span></span></code></pre></div>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(</span>
<span id="cb70-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-3" aria-hidden="true" tabindex="-1"></a>    name, <span class="co"># en la columna &quot;name&quot;</span></span>
<span id="cb70-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">&quot;de.*&quot;</span>, <span class="co"># ... el patr√≥n &quot;de*&quot;</span></span>
<span id="cb70-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">ignore_case =</span> T</span>
<span id="cb70-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb70-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">&amp;</span> <span class="co"># sin diferencias Minuscula/Mayuscula</span></span>
<span id="cb70-8"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(</span>
<span id="cb70-9"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-9" aria-hidden="true" tabindex="-1"></a>      terms.col, <span class="co"># en la columna &quot;term.cols&quot;</span></span>
<span id="cb70-10"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">regex</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">d.</span><span class="sc">\\</span><span class="st">d&quot;</span>, <span class="co"># ... el patr√≥n &quot;\\d.\\d&quot;</span></span>
<span id="cb70-11"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> F</span>
<span id="cb70-12"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb70-13"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">&amp;</span> <span class="co"># sin diferencias Minuscula/Mayuscula</span></span>
<span id="cb70-14"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">log2Ratio C</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># Y el fold-change es menor a 0</span></span>
<span id="cb70-15"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;log|name|term&quot;</span>))</span></code></pre></div>
<pre><code>##      name log2Ratio A log2Ratio B log2Ratio C    terms.col
## 1    DE_1  2.88619266  1.72149304  -2.1596075 system 2.7.9
## 2    DE_9  5.67917488  2.88518017  -0.9959204 system 2.7.9
## 3   DE_11  3.10021441  0.06300006  -3.8181005 system 2.7.9
## 4   DE_13  0.82255832 -1.56341118  -5.4445117 system 2.7.9
## 5   DE_22 -0.76625024 -1.66740167  -5.5485022 system 2.7.9
## 6   DE_25  1.96060606 -1.01985391  -4.9009545 system 2.7.9
## 7   DE_36  2.74968692  0.07204354  -3.8090570 system 2.7.9
## 8   DE_53 -0.58330148 -1.64651798  -5.5276185 system 2.7.9
## 9   DE_56  4.23552845  2.90516862  -0.9759319 system 2.7.9
## 10  DE_60  2.73800563  1.63308990  -2.2480107 system 2.7.9
## 11  DE_64  2.47002415 -0.04970850  -3.9308091 system 2.7.9
## 12  DE_67  5.58416167  3.54621148  -0.3348891 system 2.7.9
## 13  DE_75 -0.11981155 -2.20549736  -6.0865979 system 2.7.9
## 14  DE_81  1.17481419  0.75492764  -3.1261729 system 2.7.9
## 15  DE_89  0.02689662 -0.49411439  -4.3752149 system 2.7.9
## 16  DE_91  1.96585394 -1.62345146  -5.5045520 system 2.7.9
## 17  DE_97  3.80597760  1.42927704  -2.4518235 system 2.7.9
## 18  DE_98  4.41874115  1.56208028  -2.3190203 system 2.7.9
## 19 DE_125  5.51197271  2.70544709  -1.1756535 system 2.7.9
## 20 DE_127  4.76132191  2.22996237  -1.6511382 system 2.7.9
## 21 DE_129  4.75642719  2.58463855  -1.2964620 system 2.7.9
## 22 DE_131  4.70996518  1.91561721  -1.9654833 system 2.7.9
## 23 DE_142  4.84611277  2.47381906  -1.4072815 system 2.7.9
## 24 DE_148  4.98743782  3.11872663  -0.7623739 system 2.7.9
## 25 DE_152  4.61256373  1.81066607  -2.0704345 system 2.7.9
## 26 DE_162  4.30961154  3.53035247  -0.3507481 system 2.7.9
## 27 DE_181  4.50450193  1.75608264  -2.1250179 system 2.7.9
## 28 DE_191  2.01897497  1.95532209  -1.9257785 system 2.7.9
## 29 DE_210  1.96482442  1.98761723  -1.8934833 system 2.7.9
## 30 DE_215  1.57229716  1.17189052  -2.7092100 system 2.7.9
## 31 DE_218  4.54997067  2.70319279  -1.1779078 system 2.7.9
## 32 DE_228  6.03492708  3.60861795  -0.2724826 system 2.7.9
## 33 DE_230  3.05837416  1.28174575  -2.5993548 system 2.7.9
## 34 DE_232  4.27065106  1.72458820  -2.1565124 system 2.7.9
## 35 DE_234  3.90509509  3.39649548  -0.4846051 system 2.7.9
## 36 DE_239  2.74954208 -0.68467005  -4.5657706 system 2.7.9
## 37 DE_243  6.61981075  2.82114359  -1.0599570 system 2.7.9
## 38 DE_255  0.00565650 -1.68945866  -5.5705592 system 2.7.9
## 39 DE_277  3.36321062  1.09113550  -2.7899650 system 2.7.9
## 40 DE_288  4.98204788  2.66509747  -1.2160031 system 2.7.9
## 41 DE_290  2.71675834  1.80294964  -2.0781509 system 2.7.9</code></pre>
<ul>
<li><code>%in%</code> permite detectar si un elemento esta en un objeto. Devuelve TRUE/FALSE.<br />
Puede usarse como un complemento de los comparadores <code>==</code>, <code>&gt;</code>, <code>&lt;=</code> en sentencias <code>if(){}</code></li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (T) {<span class="st">&quot;ok&quot;</span>}</span></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (F) {<span class="st">&quot;ok&quot;</span>}</span>
<span id="cb74-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;system 2.7.9&quot;</span> <span class="sc">%in%</span> final.data.with.terms.nas<span class="sc">$</span>terms.col) {<span class="st">&quot;ok&quot;</span>}</span></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;system 2.7.9&quot; est√° en &quot;final.data...&quot; as√≠ que TRUE -&gt; &#39;ok&#39;</span></span>
<span id="cb76-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-2" aria-hidden="true" tabindex="-1"></a>final.data.with.terms.nas <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb76-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="st">&quot;system 2.7.9&quot;</span> <span class="sc">%in%</span> final.data.with.terms.nas<span class="sc">$</span>terms.col) <span class="fu">print</span>(<span class="st">&quot;ok&quot;</span>) <span class="cf">else</span> <span class="fu">str_extract</span>(.[[<span class="st">&quot;terms.col&quot;</span>]], <span class="st">&quot;system.*&quot;</span>)</span>
<span id="cb76-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  } <span class="sc">%&gt;%</span></span>
<span id="cb76-6"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="ot">-&gt;</span> unicos</span></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a>mis.datos <span class="ot">&lt;-</span> <span class="fu">list</span>(final.data.with.terms.nas, unicos, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="cn">NA</span>))</span></code></pre></div>
</div>
<div id="ejemplo-de-vida-real" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Ejemplo de vida real</h2>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb79-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb79-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co">#fba &lt;-  read.csv(&#39;clase_3_datos.csv&#39;)</span></span>
<span id="cb79-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb79-4" aria-hidden="true" tabindex="-1"></a>fba <span class="ot">&lt;-</span>  <span class="fu">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/DeepenData/clases/944d24e71390c75ab16c9a00a941ce6f3de1369d/03-mutate-pipes-regex/clase_3_datos.csv&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Missing column names filled in: &#39;X1&#39; [1]</code></pre>
<pre><code>## 
## ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## cols(
##   X1 = col_double(),
##   ID = col_character(),
##   Name = col_character(),
##   Reaction = col_character(),
##   Flux = col_double(),
##   Sensitivity = col_double()
## )</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a>fba   <span class="sc">%&lt;&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&#39;ID&#39;</span>, <span class="fu">matches</span>(<span class="st">&#39;flux&#39;</span>), <span class="fu">contains</span>(<span class="st">&#39;Reac&#39;</span>),<span class="fu">matches</span>(<span class="st">&#39;*ame.*|sen&#39;</span>))) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(ID, <span class="fu">regex</span>(<span class="st">&#39;DM|sink&#39;</span>, <span class="at">ignore_case =</span> T)))  <span class="sc">%&gt;%</span></span>
<span id="cb82-2"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb82-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Node type</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(Reaction, <span class="fu">regex</span>(<span class="st">&#39;</span><span class="sc">\\</span><span class="st">[[a-z]A</span><span class="sc">\\</span><span class="st">]&#39;</span>,              <span class="at">ignore_case =</span> T)), <span class="st">&#39;Astrocyte&#39;</span>, <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb82-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Node type</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(Reaction, <span class="fu">regex</span>(<span class="st">&#39;</span><span class="sc">\\</span><span class="st">[[a-z]N</span><span class="sc">\\</span><span class="st">]&#39;</span>,              <span class="at">ignore_case =</span> T)), <span class="st">&#39;Neuron&#39;</span>, <span class="st">`</span><span class="at">Node type</span><span class="st">`</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb82-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(Flux <span class="sc">&gt;</span> <span class="fl">0.1</span> <span class="sc">&amp;</span> <span class="fu">abs</span>(Sensitivity) <span class="sc">&gt;</span>  <span class="dv">0</span>)  <span class="sc">%&gt;%</span> <span class="fu">column_to_rownames</span>(<span class="st">&quot;ID&quot;</span>)</span>
<span id="cb82-5"><a href="clase-3-exploraci√≥n-y-transformaci√≥n-de-estructuras-de-datos-en-r.html#cb82-5" aria-hidden="true" tabindex="-1"></a>fba</span></code></pre></div>
<pre><code>##                      Flux
## ENO                7.0380
## GAPD               7.0380
## GLCt1r             3.5190
## GLNS               4.2228
## HEX1               3.5190
## PFK                3.5190
## PYK                7.0380
## BTNt4i_Int         2.1114
## GLUt6_Int          4.2228
## NaKt_Int           2.8152
## ASPGLUm_Neuron    10.8026
## CSm_Neuron        10.8026
## CYOOm2_Neuron     32.4078
## CYOR-u10m_Neuron  64.8156
## ENO_Neuron         3.7646
## FUMm_Neuron       10.8026
## GAPD_Neuron        3.7646
## GLUNm_Neuron       4.2228
## HEX1_Neuron        1.8823
## HMGCOASim_Neuron  10.8026
## ICDHyrm_Neuron    10.8026
## L-LACt2r_Neuron    7.0380
## LDH_L_Neuron       7.0380
## MDHm_Neuron       21.6052
## NH4t3r_Neuron      4.2228
## PFK_Neuron         1.8823
## PGI_Neuron         1.8823
## PIt2m_Neuron     151.2364
## PYRt2m_Neuron     10.8026
## SUCD1m_Neuron     10.8026
## GLNtN1_Neuron      4.2228
## NaEX_Neuron      346.7718
## GLCt1r_Neuron      1.8823
##                                                                                                          Reaction
## ENO                                                                                 2pg[cA] &lt;=&gt; h2o[cA] + pep[cA]
## GAPD                                                  g3p[cA] + nad[cA] + pi[cA] &lt;=&gt; 13dpg[cA] + h[cA] + nadh[cA]
## GLCt1r                                                                                     glc-D[e] --&gt; glc-D[cA]
## GLNS                                       atp[cA] + glu-L[cA] + nh4[cA] --&gt; adp[cA] + gln-L[cA] + h[cA] + pi[cA]
## HEX1                                                            atp[cA] + glc-D[cA] --&gt; adp[cA] + g6p[cA] + h[cA]
## PFK                                                               atp[cA] + f6p[cA] --&gt; adp[cA] + fdp[cA] + h[cA]
## PYK                                                               adp[cA] + h[cA] + pep[cA] --&gt; atp[cA] + pyr[cA]
## BTNt4i_Int                                                                      btn[I] + h[cA] --&gt; btn[cA] + h[I]
## GLUt6_Int                         glu-L[I] + h[I] + k[cA] + 3.0 na1[I] --&gt; glu-L[cA] + h[cA] + k[I] + 3.0 na1[cA]
## NaKt_Int         atp[cA] + h2o[cA] + 2.0 k[I] + 3.0 na1[cA] --&gt; adp[cA] + h[cA] + 2.0 k[cA] + 3.0 na1[I] + pi[cA]
## ASPGLUm_Neuron                                    asp-L[mN] + glu-L[cN] + h[cN] --&gt; asp-L[cN] + glu-L[mN] + h[mN]
## CSm_Neuron                                            accoa[mN] + h2o[mN] + oaa[mN] --&gt; cit[mN] + coa[mN] + h[mN]
## CYOOm2_Neuron                    4.0 focytC[mN] + 8.0 h[mN] + o2[mN] --&gt; 4.0 ficytC[mN] + 2.0 h2o[mN] + 4.0 h[cN]
## CYOR-u10m_Neuron                  2.0 ficytC[mN] + 2.0 h[mN] + q10h2[mN] --&gt; 2.0 focytC[mN] + 4.0 h[cN] + q10[mN]
## ENO_Neuron                                                                          2pg[cN] &lt;=&gt; h2o[cN] + pep[cN]
## FUMm_Neuron                                                                       fum[mN] + h2o[mN] &lt;=&gt; mal-L[mN]
## GAPD_Neuron                                           g3p[cN] + nad[cN] + pi[cN] &lt;=&gt; 13dpg[cN] + h[cN] + nadh[cN]
## GLUNm_Neuron                                                          gln-L[mN] + h2o[mN] --&gt; glu-L[mN] + nh4[mN]
## HEX1_Neuron                                                     atp[cN] + glc-D[cN] --&gt; adp[cN] + g6p[cN] + h[cN]
## HMGCOASim_Neuron                                 aacoa[mN] + accoa[mN] + h2o[mN] --&gt; coa[mN] + h[mN] + hmgcoa[mN]
## ICDHyrm_Neuron                                              icit[mN] + nadp[mN] &lt;=&gt; akg[mN] + co2[mN] + nadph[mN]
## L-LACt2r_Neuron                                                             h[I] + lac-L[I] --&gt; h[cN] + lac-L[cN]
## LDH_L_Neuron                                                   lac-L[cN] + nad[cN] --&gt; h[cN] + nadh[cN] + pyr[cN]
## MDHm_Neuron                                                    mal-L[mN] + nad[mN] &lt;=&gt; h[mN] + nadh[mN] + oaa[mN]
## NH4t3r_Neuron                                                                   h[I] + nh4[cN] &lt;=&gt; h[cN] + nh4[I]
## PFK_Neuron                                                        atp[cN] + f6p[cN] --&gt; adp[cN] + fdp[cN] + h[cN]
## PGI_Neuron                                                                                    g6p[cN] &lt;=&gt; f6p[cN]
## PIt2m_Neuron                                                                    h[cN] + pi[cN] &lt;=&gt; h[mN] + pi[mN]
## PYRt2m_Neuron                                                                 h[cN] + pyr[cN] &lt;=&gt; h[mN] + pyr[mN]
## SUCD1m_Neuron                                                          fad[mN] + succ[mN] &lt;=&gt; fadh2[mN] + fum[mN]
## GLNtN1_Neuron                                            gln-L[I] + h[cN] + na1[I] &lt;=&gt; gln-L[cN] + h[I] + na1[cN]
## NaEX_Neuron                                                                                    na1[e] &lt;=&gt; na1[cN]
## GLCt1r_Neuron                                                                              glc-D[e] --&gt; glc-D[cN]
##                                                                                           Name
## ENO                                                                          enolase Astrocyte
## GAPD                                        glyceraldehyde-3-phosphate dehydrogenase Astrocyte
## GLCt1r                                                   glucose transport (uniport) Astrocyte
## GLNS                                                            glutamine synthetase Astrocyte
## HEX1                                                      hexokinase (D-glucose:ATP) Astrocyte
## PFK                                                              phosphofructokinase Astrocyte
## PYK                                                                  pyruvate kinase Astrocyte
## BTNt4i_Int                                   Biotin uptake (antiport) Interstitial And Synapse
## GLUt6_Int        Glutamate transport via Na, H symport and K antiport Interstitial And Synapse
## NaKt_Int                                     Na+/K+ exchanging ATPase Interstitial And Synapse
## ASPGLUm_Neuron                                aspartate-glutamate mitochondrial shuttle Neuron
## CSm_Neuron                                                             citrate synthase Neuron
## CYOOm2_Neuron                            cytochrome c oxidase, mitochondrial Complex IV Neuron
## CYOR-u10m_Neuron                        ubiquinol-6 cytochrome c reductase, Complex III Neuron
## ENO_Neuron                                                                      enolase Neuron
## FUMm_Neuron                                                     fumarase, mitochondrial Neuron
## GAPD_Neuron                                    glyceraldehyde-3-phosphate dehydrogenase Neuron
## GLUNm_Neuron                                                glutaminase (mitochondrial) Neuron
## HEX1_Neuron                                                  hexokinase (D-glucose:ATP) Neuron
## HMGCOASim_Neuron                                Hydroxymethylglutaryl CoA synthase (ir) Neuron
## ICDHyrm_Neuron                                         Isocitrate dehydrogenase (NADP+) Neuron
## L-LACt2r_Neuron                       L-lactate reversible transport via proton symport Neuron
## LDH_L_Neuron                                                    L-lactate dehydrogenase Neuron
## MDHm_Neuron                                         malate dehydrogenase, mitochondrial Neuron
## NH4t3r_Neuron                                     ammonia transport via proton antiport Neuron
## PFK_Neuron                                                          phosphofructokinase Neuron
## PGI_Neuron                                                glucose-6-phosphate isomerase Neuron
## PIt2m_Neuron                                       phosphate transporter, mitochondrial Neuron
## PYRt2m_Neuron                       pyruvate mitochondrial transport via proton symport Neuron
## SUCD1m_Neuron                                                   succinate dehydrogenase Neuron
## GLNtN1_Neuron                                                     Glutamine transporter Neuron
## NaEX_Neuron                                            Sodium transport (added for simulation)
## GLCt1r_Neuron                                                       Glucose transporter_Neuron
##                    Sensitivity Node type
## ENO               9.020562e-16 Astrocyte
## GAPD              1.110223e-15 Astrocyte
## GLCt1r            6.652000e+01 Astrocyte
## GLNS              1.332268e-15 Astrocyte
## HEX1             -1.998401e-15 Astrocyte
## PFK              -1.998401e-15 Astrocyte
## PYK               2.153833e-14 Astrocyte
## BTNt4i_Int        3.328007e-31 Astrocyte
## GLUt6_Int        -3.328007e-31 Astrocyte
## NaKt_Int          2.220446e-16 Astrocyte
## ASPGLUm_Neuron    2.109424e-15    Neuron
## CSm_Neuron       -1.165734e-15    Neuron
## CYOOm2_Neuron    -4.884981e-15    Neuron
## CYOR-u10m_Neuron -1.776357e-15    Neuron
## ENO_Neuron        8.881784e-16    Neuron
## FUMm_Neuron      -8.881784e-16    Neuron
## GAPD_Neuron      -1.054712e-15    Neuron
## GLUNm_Neuron      8.881784e-16    Neuron
## HEX1_Neuron       1.776357e-15    Neuron
## HMGCOASim_Neuron  2.386980e-15    Neuron
## ICDHyrm_Neuron    8.881784e-16    Neuron
## L-LACt2r_Neuron   3.328007e-31    Neuron
## LDH_L_Neuron     -6.106227e-16    Neuron
## MDHm_Neuron      -2.775558e-16    Neuron
## NH4t3r_Neuron     1.776357e-15    Neuron
## PFK_Neuron        1.776357e-15    Neuron
## PGI_Neuron       -2.842171e-14    Neuron
## PIt2m_Neuron     -5.551115e-17    Neuron
## PYRt2m_Neuron     3.330669e-16    Neuron
## SUCD1m_Neuron    -6.661338e-16    Neuron
## GLNtN1_Neuron    -2.664535e-15    Neuron
## NaEX_Neuron       2.812565e-15    Neuron
## GLCt1r_Neuron     6.000000e+01    Neuron</code></pre>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="clase-2-creaci√≥n-y-exploraci√≥n-de-estructuras-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clase-4-descargas-desde-repositorios-e-interacci√≥n-con-objetos-descargados.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DeepenData/clases/blob/master/03-mutate-pipes-regex/03-mutate-pipes-regex.Rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
